yii.validation=function(o){var l={isEmpty:function(e){return null==e||o.isArray(e)&&0===e.length||""===e},addMessage:function(e,a,s){e.push(a.replace(/\{value\}/g,s))},required:function(e,a,s){var t=!1;if(void 0===s.requiredValue){var n="string"==typeof e||e instanceof String;(s.strict&&void 0!==e||!s.strict&&!l.isEmpty(n?o.trim(e):e))&&(t=!0)}else(!s.strict&&e==s.requiredValue||s.strict&&e===s.requiredValue)&&(t=!0);t||l.addMessage(a,s.message,e)},boolean:function(e,a,s){s.skipOnEmpty&&l.isEmpty(e)||!s.strict&&(e==s.trueValue||e==s.falseValue)||s.strict&&(e===s.trueValue||e===s.falseValue)||l.addMessage(a,s.message,e)},string:function(e,a,s){s.skipOnEmpty&&l.isEmpty(e)||("string"==typeof e?void 0===s.is||e.length==s.is?(void 0!==s.min&&e.length<s.min&&l.addMessage(a,s.tooShort,e),void 0!==s.max&&e.length>s.max&&l.addMessage(a,s.tooLong,e)):l.addMessage(a,s.notEqual,e):l.addMessage(a,s.message,e))},file:function(e,s,t){var a=r(e,s,t);o.each(a,function(e,a){m(a,s,t)})},image:function(e,t,n,i){var a=r(e,t,n);o.each(a,function(e,a){if(m(a,t,n),"undefined"!=typeof FileReader){var s=o.Deferred();l.validateImage(a,t,n,s,new FileReader,new Image),i.push(s)}})},validateImage:function(e,a,s,t,n,i){i.onload=function(){!function(e,a,s,t){t.minWidth&&a.width<t.minWidth&&s.push(t.underWidth.replace(/\{file\}/g,e.name));t.maxWidth&&a.width>t.maxWidth&&s.push(t.overWidth.replace(/\{file\}/g,e.name));t.minHeight&&a.height<t.minHeight&&s.push(t.underHeight.replace(/\{file\}/g,e.name));t.maxHeight&&a.height>t.maxHeight&&s.push(t.overHeight.replace(/\{file\}/g,e.name))}(e,i,a,s),t.resolve()},i.onerror=function(){a.push(s.notImage.replace(/\{file\}/g,e.name)),t.resolve()},n.onload=function(){i.src=this.result},n.onerror=function(){t.resolve()},n.readAsDataURL(e)},number:function(e,a,s){s.skipOnEmpty&&l.isEmpty(e)||("string"!=typeof e||s.pattern.test(e)?(void 0!==s.min&&e<s.min&&l.addMessage(a,s.tooSmall,e),void 0!==s.max&&e>s.max&&l.addMessage(a,s.tooBig,e)):l.addMessage(a,s.message,e))},range:function(e,a,s){if(!s.skipOnEmpty||!l.isEmpty(e))if(s.allowArray||!o.isArray(e)){var t=!0;o.each(o.isArray(e)?e:[e],function(e,a){return-1!=o.inArray(a,s.range)||(t=!1)}),void 0===s.not&&(s.not=!1),s.not===t&&l.addMessage(a,s.message,e)}else l.addMessage(a,s.message,e)},regularExpression:function(e,a,s){s.skipOnEmpty&&l.isEmpty(e)||(!s.not&&!s.pattern.test(e)||s.not&&s.pattern.test(e))&&l.addMessage(a,s.message,e)},email:function(e,a,s){if(!s.skipOnEmpty||!l.isEmpty(e)){var t=!0,n=/^((?:"?([^"]*)"?\s)?)(?:\s+)?(?:(<?)((.+)@([^>]+))(>?))$/.exec(e);if(null===n)t=!1;else{var i=n[5],r=n[6];s.enableIDN&&(i=punycode.toASCII(i),r=punycode.toASCII(r),e=n[1]+n[3]+i+"@"+r+n[7]),t=!(64<i.length)&&(!(254<(i+"@"+r).length)&&(s.pattern.test(e)||s.allowName&&s.fullPattern.test(e)))}t||l.addMessage(a,s.message,e)}},url:function(e,a,s){if(!s.skipOnEmpty||!l.isEmpty(e)){s.defaultScheme&&!/:\/\//.test(e)&&(e=s.defaultScheme+"://"+e);var t=!0;if(s.enableIDN){var n=/^([^:]+):\/\/([^\/]+)(.*)$/.exec(e);null===n?t=!1:e=n[1]+"://"+punycode.toASCII(n[2])+n[3]}t&&s.pattern.test(e)||l.addMessage(a,s.message,e)}},trim:function(e,a,s,t){var n=e.find(a.input);return n.is(":checkbox, :radio")||(t=n.val(),s.skipOnEmpty&&l.isEmpty(t)||(t=o.trim(t),n.val(t))),t},captcha:function(e,a,s){if(!s.skipOnEmpty||!l.isEmpty(e)){var t=o("body").data(s.hashKey);t=null==t?s.hash:t[s.caseSensitive?0:1];for(var n=s.caseSensitive?e:e.toLowerCase(),i=n.length-1,r=0;0<=i;--i)r+=n.charCodeAt(i);r!=t&&l.addMessage(a,s.message,e)}},compare:function(e,a,s,t){if(!s.skipOnEmpty||!l.isEmpty(e)){var n,i=!0;if(void 0===s.compareAttribute)n=s.compareValue;else{var r=o("#"+s.compareAttribute);r.length||(r=t.find('[name="'+s.compareAttributeName+'"]')),n=r.val()}switch("number"===s.type&&(e=e?parseFloat(e):0,n=n?parseFloat(n):0),s.operator){case"==":i=e==n;break;case"===":i=e===n;break;case"!=":i=e!=n;break;case"!==":i=e!==n;break;case">":i=n<e;break;case">=":i=n<=e;break;case"<":i=e<n;break;case"<=":i=e<=n;break;default:i=!1}i||l.addMessage(a,s.message,e)}},ip:function(e,a,s){if(!s.skipOnEmpty||!l.isEmpty(e)){var t=null,n=null,i=new RegExp(s.ipParsePattern).exec(e);if(i&&(t=i[1]||null,e=i[2],n=i[4]||null),!0!==s.subnet||null!==n)if(!1!==s.subnet||null===n)if(!1!==s.negation||null===t)6==(-1===e.indexOf(":")?4:6)?(new RegExp(s.ipv6Pattern).test(e)||l.addMessage(a,s.messages.message,e),s.ipv6||l.addMessage(a,s.messages.ipv6NotAllowed,e)):(new RegExp(s.ipv4Pattern).test(e)||l.addMessage(a,s.messages.message,e),s.ipv4||l.addMessage(a,s.messages.ipv4NotAllowed,e));else l.addMessage(a,s.messages.message,e);else l.addMessage(a,s.messages.hasSubnet,e);else l.addMessage(a,s.messages.noSubnet,e)}}};function r(e,a,s){if("undefined"==typeof File)return[];var t=o(e.input,e.$form).get(0);if(void 0===t)return[];var n=t.files;return n?0===n.length?(s.skipOnEmpty||a.push(s.uploadRequired),[]):s.maxFiles&&s.maxFiles<n.length?(a.push(s.tooMany),[]):n:(a.push(s.message),[])}function m(e,a,s){if(s.extensions&&0<s.extensions.length){var t=e.name.lastIndexOf("."),n=~t?e.name.substr(t+1,e.name.length).toLowerCase():"";~s.extensions.indexOf(n)||a.push(s.wrongExtension.replace(/\{file\}/g,e.name))}s.mimeTypes&&0<s.mimeTypes.length&&!function(e,a){for(var s=0,t=e.length;s<t;s++)if(new RegExp(e[s]).test(a))return!0;return!1}(s.mimeTypes,e.type)&&a.push(s.wrongMimeType.replace(/\{file\}/g,e.name)),s.maxSize&&s.maxSize<e.size&&a.push(s.tooBig.replace(/\{file\}/g,e.name)),s.minSize&&s.minSize>e.size&&a.push(s.tooSmall.replace(/\{file\}/g,e.name))}return l}(jQuery);